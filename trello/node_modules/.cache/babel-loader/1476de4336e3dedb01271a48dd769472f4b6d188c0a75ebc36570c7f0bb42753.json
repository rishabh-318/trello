{"ast":null,"code":"// src/components/TaskCard/TaskCard.js\nimport React,{useState}from\"react\";import{updateTask,deleteTask}from\"../../api/tasks\";import{useDraggable}from\"@dnd-kit/core\";import\"../../styles/task.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PRIORITY_COLORS={Low:\"#28a745\",Medium:\"#ffc107\",High:\"#dc3545\"};const TaskCard=_ref=>{let{task,onUpdate,onDelete}=_ref;const[isEditing,setIsEditing]=useState(false);const[editData,setEditData]=useState({...task});const{attributes,listeners,setNodeRef,transform,transition}=useDraggable({id:task._id});const dragStyle={transform:transform?`translate(${transform.x}px, ${transform.y}px)`:undefined,transition};const handleSave=async()=>{const updated=await updateTask(task._id,editData);onUpdate(updated);setIsEditing(false);};const handleDelete=async()=>{if(window.confirm(\"Delete this task?\")){await deleteTask(task._id);onDelete(task._id);}};const handleStatusChange=async(taskId,newStatus)=>{try{if(!taskId||!newStatus)throw new Error(\"Invalid task ID or status.\");const updated=await updateTask(taskId,{status:newStatus});onUpdate(updated);// <- update UI immediately\nconsole.log(`✅ Task ${taskId} status updated to ${newStatus}`);}catch(error){console.error(\"❌ Failed to update task:\",error.message);alert(\"Something went wrong while updating the task. Try again.\");}};if(isEditing){var _editData$dueDate;return/*#__PURE__*/_jsxs(\"div\",{className:\"task editing\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editData.title,onChange:e=>setEditData({...editData,title:e.target.value})}),/*#__PURE__*/_jsx(\"textarea\",{value:editData.description,onChange:e=>setEditData({...editData,description:e.target.value})}),/*#__PURE__*/_jsxs(\"select\",{value:editData.priority,onChange:e=>setEditData({...editData,priority:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{children:\"High\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Assigned to\",value:editData.assignedTo,onChange:e=>setEditData({...editData,assignedTo:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:(_editData$dueDate=editData.dueDate)===null||_editData$dueDate===void 0?void 0:_editData$dueDate.split(\"T\")[0],onChange:e=>setEditData({...editData,dueDate:e.target.value})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSave,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setIsEditing(false),children:\"Cancel\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"task\",ref:setNodeRef,style:dragStyle,...listeners,...attributes,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:task.title}),/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{backgroundColor:PRIORITY_COLORS[task.priority]},children:task.priority})]}),task.description&&/*#__PURE__*/_jsx(\"p\",{children:task.description}),task.assignedTo&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDC64 \",task.assignedTo]}),task.dueDate&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCC5 \",new Date(task.dueDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-controls\",children:[/*#__PURE__*/_jsxs(\"select\",{value:task.status,onChange:e=>handleStatusChange(task._id,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{children:\"To Do\"}),/*#__PURE__*/_jsx(\"option\",{children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Done\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setIsEditing(true),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleDelete,children:\"Delete\"})]})]});};export default TaskCard;","map":{"version":3,"names":["React","useState","updateTask","deleteTask","useDraggable","jsx","_jsx","jsxs","_jsxs","PRIORITY_COLORS","Low","Medium","High","TaskCard","_ref","task","onUpdate","onDelete","isEditing","setIsEditing","editData","setEditData","attributes","listeners","setNodeRef","transform","transition","id","_id","dragStyle","x","y","undefined","handleSave","updated","handleDelete","window","confirm","handleStatusChange","taskId","newStatus","Error","status","console","log","error","message","alert","_editData$dueDate","className","children","type","value","title","onChange","e","target","description","priority","placeholder","assignedTo","dueDate","split","onClick","ref","style","backgroundColor","Date","toLocaleDateString"],"sources":["C:/Users/Intel/Desktop/programs/scriptGuru/trello/src/components/TaskCard/TaskCard.js"],"sourcesContent":["// src/components/TaskCard/TaskCard.js\r\nimport React, { useState } from \"react\";\r\nimport { updateTask, deleteTask } from \"../../api/tasks\";\r\nimport { useDraggable } from \"@dnd-kit/core\";\r\nimport \"../../styles/task.css\";\r\n\r\nconst PRIORITY_COLORS = {\r\n  Low: \"#28a745\",\r\n  Medium: \"#ffc107\",\r\n  High: \"#dc3545\",\r\n};\r\n\r\nconst TaskCard = ({ task, onUpdate, onDelete }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editData, setEditData] = useState({ ...task });\r\n\r\n  const { attributes, listeners, setNodeRef, transform, transition } =\r\n    useDraggable({ id: task._id });\r\n\r\n  const dragStyle = {\r\n    transform: transform\r\n      ? `translate(${transform.x}px, ${transform.y}px)`\r\n      : undefined,\r\n    transition,\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const updated = await updateTask(task._id, editData);\r\n    onUpdate(updated);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(\"Delete this task?\")) {\r\n      await deleteTask(task._id);\r\n      onDelete(task._id);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (taskId, newStatus) => {\r\n    try {\r\n      if (!taskId || !newStatus) throw new Error(\"Invalid task ID or status.\");\r\n\r\n      const updated = await updateTask(taskId, { status: newStatus });\r\n      onUpdate(updated); // <- update UI immediately\r\n\r\n      console.log(`✅ Task ${taskId} status updated to ${newStatus}`);\r\n    } catch (error) {\r\n      console.error(\"❌ Failed to update task:\", error.message);\r\n      alert(\"Something went wrong while updating the task. Try again.\");\r\n    }\r\n  };\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <div className=\"task editing\">\r\n        <input\r\n          type=\"text\"\r\n          value={editData.title}\r\n          onChange={(e) => setEditData({ ...editData, title: e.target.value })}\r\n        />\r\n        <textarea\r\n          value={editData.description}\r\n          onChange={(e) =>\r\n            setEditData({ ...editData, description: e.target.value })\r\n          }\r\n        />\r\n        <select\r\n          value={editData.priority}\r\n          onChange={(e) =>\r\n            setEditData({ ...editData, priority: e.target.value })\r\n          }\r\n        >\r\n          <option>Low</option>\r\n          <option>Medium</option>\r\n          <option>High</option>\r\n        </select>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Assigned to\"\r\n          value={editData.assignedTo}\r\n          onChange={(e) =>\r\n            setEditData({ ...editData, assignedTo: e.target.value })\r\n          }\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          value={editData.dueDate?.split(\"T\")[0]}\r\n          onChange={(e) =>\r\n            setEditData({ ...editData, dueDate: e.target.value })\r\n          }\r\n        />\r\n        <div className=\"form-actions\">\r\n          <button className=\"btn btn-primary\" onClick={handleSave}>\r\n            Save\r\n          </button>\r\n          <button\r\n            className=\"btn btn-secondary\"\r\n            onClick={() => setIsEditing(false)}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"task\"\r\n      ref={setNodeRef}\r\n      style={dragStyle}\r\n      {...listeners}\r\n      {...attributes}\r\n    >\r\n      <div className=\"task-header\">\r\n        <h4>{task.title}</h4>\r\n        <span\r\n          className=\"badge\"\r\n          style={{ backgroundColor: PRIORITY_COLORS[task.priority] }}\r\n        >\r\n          {task.priority}\r\n        </span>\r\n      </div>\r\n      {task.description && <p>{task.description}</p>}\r\n      {task.assignedTo && <p>👤 {task.assignedTo}</p>}\r\n      {task.dueDate && <p>📅 {new Date(task.dueDate).toLocaleDateString()}</p>}\r\n      <div className=\"task-controls\">\r\n        <select\r\n          value={task.status}\r\n          onChange={(e) => handleStatusChange(task._id, e.target.value)}\r\n        >\r\n          <option>To Do</option>\r\n          <option>In Progress</option>\r\n          <option>Done</option>\r\n        </select>\r\n        <button className=\"btn btn-primary\" onClick={() => setIsEditing(true)}>\r\n          Edit\r\n        </button>\r\n        <button className=\"btn btn-danger\" onClick={handleDelete}>\r\n          Delete\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}